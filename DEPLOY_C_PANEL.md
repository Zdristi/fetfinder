# Инструкция по развертыванию FetDate на cPanel (HostIQ.ua)

## 1. Клонирование репозитория
1. Войдите в cPanel
2. Перейдите в раздел "Git Version Control"
3. Укажите URL репозитория: https://github.com/Zdristi/FetDate1.git
4. Выберите папку для размещения (например, оставьте пустым для размещения в корне домашней директории или создайте поддиректорию вроде 'myapp')
5. Нажмите "Create"

ВАЖНО: Некоторые хостинги не позволяют использовать папку 'public_html' напрямую. 
- В этом случае разместите приложение в корне домашней директории (оставьте поле пустым)
- Или создайте другую директорию (например, 'fetdate_app') и укажите её
- Если вы размещаете приложение в корне домашней директории, вам нужно будет настроить домен через "Addon Domains" или "Subdomain" в cPanel

## 2. Настройка Python-приложения
1. В cPanel перейдите в "Software" > "Setup Python App"
2. Нажмите "Add application"
3. Укажите:
   - App Directory: путь к директории вашего приложения (например, './' для корня домашней директории или 'имя_поддиректории')
   - App URI: оставьте по умолчанию
   - Python Version: 3.9 или выше
   - Application Startup File: passenger_wsgi.py
   - Application Template: оставьте пустым

ВАЖНО: 
- Указывайте только имя директории без слэша в начале
- Если ваше приложение находится в корне домашней директории (рекомендуется), используйте './' или оставьте поле пустым
- Некоторые хостинги не разрешают использовать 'public_html' в этом поле, используйте альтернативные пути

## 3. Установка зависимостей
1. Активируйте виртуальное окружение в разделе Python Application
2. Используйте терминал или команду установки зависимостей:
   ```
   pip install -r requirements.txt
   ```

## 4. Настройка базы данных
1. Перейдите в раздел "MySQL Databases"
2. Создайте новую базу данных и пользователя
3. Обновите переменные окружения в приложении или измените config.py для использования MySQL:
   ```
   mysql://имя_пользователя:пароль@localhost/имя_базы_данных
   ```

## 5. Настройка переменных окружения
1. Добавьте следующие переменные окружения в Python Application:
   - SECRET_KEY: ваш_секретный_ключ
   - DATABASE_URL: mysql://пользователь:пароль@localhost/база_данных
   - FLASK_ENV: production
   - MAIL_USERNAME: ваш_адрес_почты
   - MAIL_PASSWORD: пароль_приложения

## 6. Перезапустить приложение
1. В разделе Python Application нажмите "Restart" для перезапуска приложения

## 7. Проверка
1. Перейдите на ваш домен и проверьте работу сайта
2. Убедитесь, что все функции работают корректно

Если сайт не запускается, проверьте:
- Правильно ли указан Application Startup File (должен быть passenger_wsgi.py)
- Правильно ли указан App Directory (относительный путь к директории с приложением)
- Установлены ли все зависимости через pip
- Правильно ли настроены переменные окружения

## Важные замечания:
- .env файл не будет использоваться в production, переменные окружения должны быть установлены в cPanel
- Убедитесь, что все пути к файлам и директориям верны для сервера
- При возникновении проблем с правами доступа к файлам, установите соответствующие права (обычно 644 для файлов и 755 для директорий)
- При указании директории для Python-приложения в cPanel используйте относительные пути: './' для корня домашней директории
- Некоторые хостинги не разрешают использовать 'public_html' в полях Python-приложения, в этом случае размещайте приложение в корне домашней директории
- Если вы клонировали репозиторий в поддиректорию, укажите имя этой поддиректории (например, 'fetdate_app' если репозиторий в /home3/fetdate1/fetdate_app)
- После размещения приложения в корне домашней директории настройте домен через "Addon Domains" в cPanel, указав путь к папке public_html в поле "Document Root", но установив "Redirect Domain to another domain" на ваше приложение

## Настройка домена для приложения в корне домашней директории

Если вы разместили приложение в корне домашней директории (а не в public_html), вам нужно настроить домен следующим образом:

1. В cPanel перейдите в "Domains" > "Addon Domains"
2. Введите ваш домен в поле "New Domain Name"
3. В поле "Document Root" cPanel автоматически установит путь к public_html
4. НО: этот путь нужно изменить на корень домашней директории (обычно /home3/ваш_аккаунт/)
5. Нажмите "Add Domain"

ВАЖНО: Путь к документам должен указывать на директорию, где находится ваше Python-приложение (passenger_wsgi.py), а не на стандартный public_html.

Альтернативно, вы можете использовать "Subdomain" или "Parked Domains" в зависимости от возможностей вашего хостинга.

## Для обновления приложения:
1. Обновите код в репозитории
2. Перейдите в Git Version Control в cPanel
3. Нажмите "Update" для синхронизации с репозиторием
4. Перезапустите Python-приложение