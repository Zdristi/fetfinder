document.addEventListener('DOMContentLoaded',function(){console.log('Enhanced swipe functionality loaded');let startX=0;let currentX=0;let isDragging=false;let currentUserId=null;const card=document.getElementById('currentCard');if(card){console.log('Setting up enhanced swipe event listeners');card.addEventListener('pointerdown',startDrag);card.addEventListener('mousedown',startDrag);card.addEventListener('touchstart',startDrag,{passive:false});document.addEventListener('pointermove',drag,{passive:false});document.addEventListener('mousemove',drag);document.addEventListener('touchmove',drag,{passive:false});document.addEventListener('pointerup',endDrag);document.addEventListener('mouseup',endDrag);document.addEventListener('touchend',endDrag);console.log('Enhanced swipe event listeners set up successfully');}else{console.error('ERROR:Could not find card element with id="currentCard"');}function startDrag(e){console.log('===ENHANCED START DRAG EVENT===');console.log('Event type:',e.type);console.log('Target element:',e.target);if(e.type==='touchstart'){startX=e.touches[0].clientX;console.log('Touch start at X:',startX);}else if(e.type==='mousedown'){startX=e.clientX;console.log('Mouse start at X:',startX);e.preventDefault();}else if(e.type==='pointerdown'){startX=e.clientX;console.log('Pointer start at X:',startX);}isDragging=true;console.log('===ENHANCED START DRAG COMPLETED===');}function drag(e){if(!isDragging){console.log('ENHANCED DRAG:Skipping - not dragging');return;}e.preventDefault();let clientX;if(e.type==='touchmove'){if(e.touches && e.touches.length>0){clientX=e.touches[0].clientX;}else{return;}}else if(e.type==='mousemove' || e.type==='pointermove'){clientX=e.clientX;}else{return;}currentX=clientX - startX;console.log('ENHANCED DRAG:currentX=',currentX,'(clientX:',clientX,'- startX:',startX,')');const rotation=currentX * 0.1;const transformValue=`translateX(${currentX}px)rotate(${rotation}deg)`;console.log('ENHANCED DRAG:Setting transform to:',transformValue);const cardElement=document.getElementById('currentCard');console.log('ENHANCED DRAG:Card element:',cardElement);if(cardElement){cardElement.classList.add('dragging');cardElement.style.transition='transform 0s cubic-bezier(0.25,0.1,0.25,1)';cardElement.style.transform=transformValue;console.log('ENHANCED DRAG:Transform actually set to element style');}else{console.log('ENHANCED DRAG:ERROR - Could not find card element');}const absX=Math.abs(currentX);const hintOpacity=Math.min(absX / 50,1);if(currentX>50){$('#likeHint').show().css('opacity',hintOpacity);$('#dislikeHint').hide();console.log('ENHANCED DRAG:Showing LIKE hint with opacity:',hintOpacity);}else if(currentX < -50){$('#dislikeHint').show().css('opacity',hintOpacity);$('#likeHint').hide();console.log('ENHANCED DRAG:Showing DISLIKE hint with opacity:',hintOpacity);}else{$('#likeHint').hide();$('#dislikeHint').hide();console.log('ENHANCED DRAG:Hiding both hints');}}function endDrag(e){console.log('===ENHANCED END DRAG EVENT===');console.log('Event type:',e.type);if(!isDragging){console.log('ENHANCED END DRAG:Skipping - not dragging');return;}isDragging=false;let clientX;if(e.type==='touchend' && e.changedTouches && e.changedTouches.length>0){clientX=e.changedTouches[0].clientX;}else if(e.type==='mouseup' || e.type==='pointerup'){clientX=e.clientX;}else{clientX=currentX+startX;}const diffX=clientX - startX;console.log('ENHANCED END DRAG:diffX=',diffX,'(clientX:',clientX,')');$('#currentCard').css('transition','transform 0.3s ease-out,opacity 0.3s ease-out');if(diffX>100){console.log('ENHANCED END DRAG:Performing LIKE action');$('#currentCard').addClass('swipe-card-liked');$('#likeHint').show().fadeOut(200);setTimeout(function(){if(typeof swipe==='function'){swipe('like');}},200);}else if(diffX < -100){console.log('ENHANCED END DRAG:Performing DISLIKE action');$('#currentCard').addClass('swipe-card-disliked');$('#dislikeHint').show().fadeOut(200);setTimeout(function(){if(typeof swipe==='function'){swipe('dislike');}},200);}else{console.log('ENHANCED END DRAG:Returning to original position');$('#currentCard').css({'transform':'translateX(0)rotate(0deg)','transition':'transform 0.3s cubic-bezier(0.25,0.1,0.25,1),opacity 0.3s cubic-bezier(0.25,0.1,0.25,1)'}).removeClass('dragging');$('#likeHint').hide();$('#dislikeHint').hide();}console.log('===ENHANCED END DRAG COMPLETED===');}});